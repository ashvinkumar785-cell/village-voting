<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§Æ‡§§‡§¶‡§æ‡§®</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:white;
}
.app{
    max-width:420px;
    margin:auto;
    padding:15px;
    min-height:100vh;
}
h2{
    text-align:center;
}
.card{
    background:#020617;
    padding:15px;
    border-radius:15px;
    margin-bottom:15px;
}
button{
    width:100%;
    padding:12px;
    margin:6px 0;
    font-size:16px;
    border:none;
    border-radius:10px;
    background:#2563eb;
    color:white;
}
button:disabled{
    background:#475569;
}
.bar{
    height:22px;
    background:#1e293b;
    border-radius:10px;
    overflow:hidden;
    margin-bottom:8px;
}
.fill{
    height:100%;
    background:linear-gradient(90deg,#22c55e,#4ade80);
    width:0%;
}
.winner{
    text-align:center;
    font-size:20px;
    color:#22c55e;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="app">
<h2>üó≥Ô∏è ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§Æ‡§§‡§¶‡§æ‡§®</h2>

<div class="card" id="voteBox"></div>

<div class="card">
<h3>üìä ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h3>
<div id="result"></div>
</div>

<div class="winner" id="winner"></div>
</div>

<script>
// ‚úÖ ‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶‡§µ‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§®‡§æ‡§Æ
const names = [
  "‡§õ‡•à‡§≤ ‡§∏‡§ø‡§Ç‡§π ‡§¶‡•á‡§µ‡§°‡§º‡§æ",
  "‡§≤‡§ï‡•ç‡§∑‡•ç‡§Æ‡§£ ‡§∏‡§ø‡§Ç‡§π ‡§¶‡•á‡§µ‡§°‡§º‡§æ",
  "‡§ú‡•á‡§§‡§æ‡§ú‡•Ä ‡§π‡§∞‡§ú‡•Ä ‡§ú‡•Ä",
  "‡§¶‡§ø‡§®‡•á‡§∂ ‡§ï‡•Å‡§Æ‡§æ‡§∞ P",

  "‡§®‡§æ‡§ó‡§ú‡•Ä ‡§ú‡•Ä ‡§¶‡•á‡§µ‡§æ‡§∏‡•Ä"
];

// ‡§µ‡•ã‡§ü ‡§°‡•á‡§ü‡§æ (refresh ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§≠‡•Ä ‡§∞‡§π‡•á‡§ó‡§æ)
let votes = JSON.parse(localStorage.getItem("votes")) 
            || new Array(names.length).fill(0);

// ‡§è‡§ï ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ = ‡§è‡§ï ‡§µ‡•ã‡§ü
let voted = localStorage.getItem("voted");

function vote(index){
    if(voted) return;

    votes[index]++;
    localStorage.setItem("votes", JSON.stringify(votes));
    localStorage.setItem("voted", "yes");
    render();
}

function render(){
    const voteBox = document.getElementById("voteBox");
    const result = document.getElementById("result");

    voteBox.innerHTML = "<h3>üü¶ ‡§µ‡•ã‡§ü ‡§¶‡•á‡§Ç</h3>";
    names.forEach((name,i)=>{
        voteBox.innerHTML += 
        `<button onclick="vote(${i})" ${voted?"disabled":""}>${name}</button>`;
    });

    let total = votes.reduce((a,b)=>a+b,0);
    let max = Math.max(...votes);
    let winIndex = votes.indexOf(max);

    result.innerHTML="";
    names.forEach((name,i)=>{
        let percent = total ? ((votes[i]/total)*100).toFixed(1) : 0;
        result.innerHTML += `
        ${name} - ${percent}%
        <div class="bar">
            <div class="fill" style="width:${percent}%"></div>
        </div>`;
    });

    if(total > 0){
        document.getElementById("winner").innerHTML =
        "üèÜ ‡§µ‡§ø‡§ú‡•á‡§§‡§æ: " + names[winIndex];
    }
}

render();
</script>

</body>
</html>
